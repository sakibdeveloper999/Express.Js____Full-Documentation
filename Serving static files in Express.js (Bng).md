
# ЁЯУШ Express.js-ржП Static Files рж╕рж╛рж░рзНржн ржХрж░рж╛ тАФ ржкрзВрж░рзНржг ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи (ржмрж╛ржВрж▓рж╛)

---

## ЁЯза рззя╕ПтГг Static Files ржХрзА?

ржУржпрж╝рзЗржм ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ **Static Files** ржорж╛ржирзЗ рж╣рж▓рзЛ ржПржоржи ржлрж╛ржЗрж▓ ржпрзЗржЧрзБрж▓рзЛ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝ ржирж╛, рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЧрзБрж▓рзЛ **ржпрзЗржоржи ржЖржЫрзЗ рждрзЗржоржиржЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржкрж╛ржарж╛ржпрж╝**ред

ржЙржжрж╛рж╣рж░ржг:

* HTML ржлрж╛ржЗрж▓
* CSS рж╕рзНржЯрж╛ржЗрж▓рж╢рж┐ржЯ
* JavaScript (client-side) ржлрж╛ржЗрж▓
* ржЗржорзЗржЬ (JPG, PNG, SVG ржЗрждрзНржпрж╛ржжрж┐)
* ржлржирзНржЯ (TTF, WOFF)
* ржнрж┐ржбрж┐ржУ, PDF ржЗрждрзНржпрж╛ржжрж┐

ржПржЗ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ **static** ржХрж╛рж░ржг ржПржЧрзБрж▓рзЛ рж╕рж╛рж░рзНржнрж╛рж░ рж░рж╛ржиржЯрж╛ржЗржорзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ ржирж╛ тАФ рж╢рзБржзрзБ рж╕рж░рж╛рж╕рж░рж┐ ржкрж╛ржарж┐ржпрж╝рзЗ ржжрзЗржпрж╝ред

---

## тЪЩя╕П рзия╕ПтГг ржХрзЗржи Static Files рж╕рж╛рж░рзНржн ржХрж░рждрзЗ рж╣ржпрж╝?

ржУржпрж╝рзЗржм ржЕрзНржпрж╛ржкрзЗрж░ ржлрзНрж░ржирзНржЯржПржирзНржбрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ рж╕ржмрж╕ржоржпрж╝ ржХрж┐ржЫрзБ ржлрж╛ржЗрж▓ рж▓рж╛ржЧрзЗ (HTML, CSS, JS ржЗрждрзНржпрж╛ржжрж┐)ред
Express.js рж╢рзБржзрзБ API ржмрж╛ backend ржиржпрж╝, ржПржЗ static ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛржХрзЗржУ ржкрж╛ржарж╛рждрзЗ ржкрж╛рж░рзЗред

тЬЕ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржХрзНрж╖рзЗрждрзНрж░:

* ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯрзЗрж░ frontend UI рждрзИрж░рж┐ ржХрж░рждрзЗред
* ржЫржмрж┐, ржЖржЗржХржи, ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб ржкрж╛ржарж╛рждрзЗред
* React/Vue ржПрж░ build output рж╕рж╛рж░рзНржн ржХрж░рждрзЗред
* ржХрзЛржирзЛ ржбрж╛ржЙржирж▓рзЛржб ржлрж╛ржЗрж▓ ржкрж╛ржарж╛рждрзЗ (PDF, ZIP ржЗрждрзНржпрж╛ржжрж┐)ред

---

## ЁЯзй рзйя╕ПтГг `express.static()` Middleware ржХрзА?

Express.js-ржП static ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржн ржХрж░рж╛рж░ ржЬржирзНржп ржмрж┐рж▓рзНржЯ-ржЗржи middleware ржЖржЫрзЗ:

```js
express.static()
```

ЁЯСЙ ржПржЯрж╛ ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржпрж╛ **ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрзЛрж▓рзНржбрж╛рж░ ржерзЗржХрзЗ ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржн ржХрж░рзЗ**ред
ржнрж┐рждрж░рзЗ ржПржЯрж┐ `serve-static` ржирж╛ржорзЗрж░ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ, ржпрж╛ MIME type, caching, header ржЗрждрзНржпрж╛ржжрж┐ ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗред

---

## ЁЯкД рзкя╕ПтГг `express.static()` ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ (ржнрж┐рждрж░ржХрж╛рж░ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛)

ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржжрзЗржЦрж┐ ЁЯСЗ

1. рждрзБржорж┐ ржПржХржЯрж╛ **directory/folder path** ржжрж╛ржУ, ржпрзЗржоржи `public/`
2. Express рж╕рзЗржЗ ржлрзЛрж▓рзНржбрж╛рж░ ржоржирж┐ржЯрж░ ржХрж░рзЗред
3. ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржпржЦржи ржХрзЛржирзЛ ржлрж╛ржЗрж▓ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржХрж░рзЗ (ржпрзЗржоржи `/css/style.css`),
   рждржЦржи Express ржУржЗ ржлрж╛ржЗрж▓ ржЦрзБржБржЬрзЗ ржкрж╛ржпрж╝, ржкржбрж╝рзЗ, ржПржмржВ ржкрж╛ржарж┐ржпрж╝рзЗ ржжрзЗржпрж╝ред
4. ржпржжрж┐ ржлрж╛ржЗрж▓ ржирж╛ ржкрж╛ржпрж╝ тАФ
   рждрж╛рж╣рж▓рзЗ `404 Not Found` ржкрж╛ржарж╛ржпрж╝, ржЕржержмрж╛ `next()` ржХрж▓ ржХрж░рзЗ (ржпржжрж┐ `fallthrough: true` рж╕рзЗржЯ ржерж╛ржХрзЗ)ред

---

## ЁЯз▒ рзля╕ПтГг ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржЙржжрж╛рж╣рж░ржг (Step-by-Step)

### ЁЯЧВ ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░:

```
express-static-demo/
тФЬтФАтФА public/
тФВ   тФЬтФАтФА index.html
тФВ   тФЬтФАтФА css/
тФВ   тФВ   тФФтФАтФА style.css
тФВ   тФФтФАтФА js/
тФВ       тФФтФАтФА app.js
тФФтФАтФА server.js
```

### ЁЯУж ржзрж╛ржк рзз: ржкрзНрж░ржЬрзЗржХрзНржЯ ржЗржирж┐рж╢рж┐ржпрж╝рж╛рж▓рж╛ржЗржЬ

```bash
mkdir express-static-demo
cd express-static-demo
npm init -y
npm install express
```

### ЁЯза ржзрж╛ржк рзи: server.js

```js
import express from 'express';
const app = express();

// "public" ржлрзЛрж▓рзНржбрж╛рж░ ржерзЗржХрзЗ ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржн ржХрж░рж╛
app.use(express.static('public'));

app.listen(3000, () => {
  console.log('Server running on http://localhost:3000');
});
```

### ЁЯТ╗ ржзрж╛ржк рзй: index.html

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Static Demo</title>
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <h1>Hello from Express Static Files!</h1>
    <script src="/js/app.js"></script>
  </body>
</html>
```

### ЁЯОи ржзрж╛ржк рзк: style.css

```css
body {
  background-color: #f0f0f0;
  color: #333;
  font-family: Arial;
}
```

### тЪб ржзрж╛ржк рзл: app.js

```js
console.log("Static JS File Loaded!");
```

ЁЯСЙ ржПржмрж╛рж░ рж░рж╛ржи ржХрж░рзЛ:

```bash
node server.js
```

ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржЧрж┐рзЯрзЗ `http://localhost:3000` ржЦрзБрж▓рж▓рзЗ ржкрзЗржЬ ржжрзЗржЦрж╛ржмрзЗред

---

## ЁЯзн рзмя╕ПтГг Virtual Path (Prefix) ржмрзНржпржмрж╣рж╛рж░

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ URL path ржжрж┐рждрзЗ ржкрж╛рж░рзЛред

```js
app.use('/static', express.static('public'));
```

ржПржЦржи ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ рж╕рж╛рж░рзНржн рж╣ржмрзЗ:

* `/static/index.html`
* `/static/css/style.css`

ржПржЯрж╛ рж╢рзБржзрзБ ржПржХржЯрж╛ **virtual prefix** тАФ ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржПржоржи ржлрзЛрж▓рзНржбрж╛рж░ ржирзЗржЗред

---

## тЪЩя╕П рзня╕ПтГг Configuration Options (рж╕ржм ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣)

рждрзБржорж┐ `express.static('public', options)` ржП ржжрзНржмрж┐рждрзАржпрж╝ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ **options object** ржжрж┐рждрзЗ ржкрж╛рж░рзЛред

```js
app.use(express.static('public', {
  dotfiles: 'ignore',
  etag: true,
  extensions: ['html', 'htm'],
  index: 'index.html',
  maxAge: '1d',
  redirect: true,
  fallthrough: true,
  immutable: false,
  setHeaders: function (res, path, stat) {
    res.set('x-timestamp', Date.now());
  }
}));
```

| ржЕржкрж╢ржи            | ржХрж╛ржЬ                                                                                 |
| --------------- | ----------------------------------------------------------------------------------- |
| **dotfiles**    | `.` ржжрж┐ржпрж╝рзЗ рж╢рзБрж░рзБ рж╣ржУржпрж╝рж╛ ржлрж╛ржЗрж▓ (ржпрзЗржоржи `.env`) рж╕рж╛рж░рзНржн ржХрж░ржмрзЗ ржХрж┐ржирж╛ (`allow`, `deny`, `ignore`) |
| **etag**        | ржлрж╛ржЗрж▓рзЗрж░ ржЬржирзНржп cache validation header ржжрзЗржпрж╝                                            |
| **extensions**  | ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржорж┐рж╕ ржХрж░рж▓рзЗ ржПржЧрзБрж▓рзЛ ржЯрзНрж░рж╛ржЗ ржХрж░ржмрзЗ                                                 |
| **index**       | ржбрж┐ржлрж▓рзНржЯ ржлрж╛ржЗрж▓, ржбрж┐рж░рзЗржХрзНржЯрж░рж┐ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ рж╣рж▓рзЗ (default: `index.html`)                       |
| **maxAge**      | Cache ржХрж░рж╛рж░ рж╕ржоржпрж╝ржХрж╛рж▓ (`'1d'`, `'2h'`, ржмрж╛ ms ржП)                                        |
| **redirect**    | `/dir` тЖТ `/dir/` рж░рж┐ржбрж┐рж░рзЗржХрзНржЯ ржХрж░ржмрзЗ ржХрж┐ржирж╛                                                |
| **fallthrough** | ржлрж╛ржЗрж▓ ржирж╛ ржкрзЗрж▓рзЗ `next()` ржП ржпрж╛ржмрзЗ ржХрж┐ржирж╛                                                   |
| **immutable**   | Cache ржХрж░рж╛ ржлрж╛ржЗрж▓ ржкрж░рж┐ржмрж░рзНрждржи рж╣ржмрзЗ ржирж╛ ржмрзЛржЭрж╛ржпрж╝                                               |
| **setHeaders**  | ржХрж╛рж╕рзНржЯржо рж╣рзЗржбрж╛рж░ рж╕рзЗржЯ ржХрж░рж╛рж░ ржлрж╛ржВрж╢ржи                                                         |

---

## ЁЯзй рзоя╕ПтГг Custom Header рж╕рзЗржЯ ржХрж░рж╛

```js
app.use(express.static('public', {
  setHeaders: (res, path) => {
    if (path.endsWith('.html')) {
      res.setHeader('Cache-Control', 'no-cache');
    } else {
      res.setHeader('Cache-Control', 'public, max-age=31536000, immutable');
    }
  }
}));
```

---

## ЁЯТб рзпя╕ПтГг ржПржХрж╛ржзрж┐ржХ ржлрзЛрж▓рзНржбрж╛рж░ рж╕рж╛рж░рзНржн ржХрж░рж╛

```js
app.use(express.static('public'));
app.use(express.static('assets'));
```

Express ржкрзНрж░ржержорзЗ `public/` ржП ржЦрзБржБржЬржмрзЗ, ржирж╛ ржкрзЗрж▓рзЗ `assets/` ржП ржЦрзБржБржЬржмрзЗред

---

## ЁЯМН ЁЯФЯ Single Page Application (SPA) fallback

React ржмрж╛ Vue ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ рж╕ржм рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ `index.html` ржП ржжрж┐рждрзЗ рж╣ржпрж╝:

```js
import path from 'path';
import { fileURLToPath } from 'url';
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

app.use(express.static('public'));

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'public', 'index.html'));
});
```

---

## ЁЯФТ рззрззя╕ПтГг ржирж┐рж░рж╛ржкрждрзНрждрж╛ (Security Best Practices)

тЬЕ ржирж┐рж░рж╛ржкржж рж░рж╛ржЦрж╛рж░ ржЬржирзНржп:

* ржХрзЗржмрж▓ `public/` ржлрзЛрж▓рзНржбрж╛рж░ржХрзЗржЗ ржПржХрзНрж╕ржкрзЛржЬ ржХрж░рзЛред
* `.env`, config ржлрж╛ржЗрж▓ ржЗрждрзНржпрж╛ржжрж┐ ржХржЦржирзЛ рж╕рж╛рж░рзНржн ржХрзЛрж░рзЛ ржирж╛ред
* ржХрж╛рж╕рзНржЯржо path ржмрзНржпржмрж╣рж╛рж░рзЗ ржЗржиржкрзБржЯ рж╕рзНржпрж╛ржирж┐ржЯрж╛ржЗржЬ ржХрж░рзЛред
* `helmet` middleware ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ ржирж┐рж░рж╛ржкрждрзНрждрж╛ рж╣рзЗржбрж╛рж░рзЗрж░ ржЬржирзНржпред

---

## тЪб рззрзия╕ПтГг ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЯрж┐ржкрж╕

1. **Cache Control**

   ```js
   app.use(express.static('public', { maxAge: '30d', immutable: true }));
   ```

2. **Compression ржмрзНржпржмрж╣рж╛рж░**

   ```js
   import compression from 'compression';
   app.use(compression());
   ```

3. **CDN/Nginx ржмрзНржпржмрж╣рж╛рж░**
   ржмржбрж╝ ржЕрзНржпрж╛ржкрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ static ржлрж╛ржЗрж▓ CDN ржмрж╛ Nginx ржжрж┐ржпрж╝рзЗ рж╕рж╛рж░рзНржн ржХрж░рж╛ ржжрзНрж░рзБржд ржУ рж╕рзНржХрзЗрж▓рзЗржмрж▓ред

4. **Fingerprinted filenames**
   ржпрзЗржоржи `app.123abc.js` тЖТ ржирж╛ржо ржкрж░рж┐ржмрж░рзНрждржи ржорж╛ржирзЗ cache refresh рж╣ржмрзЗред

---

## ЁЯз░ рззрзйя╕ПтГг ржХржЦржи Express Static ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм / ржХрж░ржм ржирж╛

| ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ ржпржЦржи     | ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ ржирж╛ ржпржЦржи    |
| ------------------- | --------------------- |
| ржЫрзЛржЯ/ржорж╛ржЭрж╛рж░рж┐ ржкрзНрж░ржЬрзЗржХрзНржЯ | ржмржбрж╝ рж╕рзНржХрзЗрж▓ ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ   |
| ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ рж╕рзНржЯрзЗржЬрзЗ  | рж╣рж╛ржЗ-ржЯрзНрж░рж╛ржлрж┐ржХ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи |
| ржЫрзЛржЯ ржЕрзНржпрж╛рж╕рзЗржЯ         | ржнрж┐ржбрж┐ржУ/ржмржбрж╝ ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржн  |

---

## ЁЯзо рззрзкя╕ПтГг ржнрж┐рждрж░рзЗрж░ ржХрж╛ржЬрзЗрж░ ржзрж╛ржк (Internal Flow)

1. ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржлрж╛ржЗрж▓ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржкрж╛ржарж╛ржпрж╝ред
2. Express ржлрж╛ржЗрж▓рзЗрж░ ржЕрж╕рзНрждрж┐рждрзНржм ржЪрзЗржХ ржХрж░рзЗред
3. ржлрж╛ржЗрж▓ ржерж╛ржХрж▓рзЗ рж╕рзЗржЯрж┐ рж╕рзНржЯрзНрж░рж┐ржо ржЖржХрж╛рж░рзЗ ржкрж╛ржарж╛ржпрж╝ред
4. MIME type, length, cache headers рж╕рзЗржЯ рж╣ржпрж╝ред
5. ржлрж╛ржЗрж▓ ржирж╛ ржкрзЗрж▓рзЗ `next()` ржмрж╛ `404` ржжрзЗржпрж╝ред

---

## ЁЯУЛ рззрзля╕ПтГг рж╕ржорзНржкрзВрж░рзНржг ржЙржжрж╛рж╣рж░ржг (рж╕ржм ржПржХрж╕рж╛ржерзЗ)

```js
import express from 'express';
import compression from 'compression';
import path from 'path';
import { fileURLToPath } from 'url';

const app = express();
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

app.use(compression());

app.use(express.static(path.join(__dirname, 'public'), {
  maxAge: '7d',
  immutable: true,
  setHeaders: (res, filePath) => {
    if (filePath.endsWith('.html')) {
      res.setHeader('Cache-Control', 'no-cache');
    }
  }
}));

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'public', 'index.html'));
});

app.listen(3000, () => console.log('Server running at http://localhost:3000'));
```

---

## ЁЯзн рззрзмя╕ПтГг рж╕рж╛рж░рж╛ржВрж╢

| ржмрж┐рж╖рзЯ              | рж╕рж╛рж░рж╛ржВрж╢                              |
| ----------------- | ----------------------------------- |
| Middleware        | `express.static()`                  |
| Default Folder    | `public/`                           |
| Custom URL Prefix | `/static`                           |
| Cache Control     | `maxAge`, `immutable`, `setHeaders` |
| SPA Support       | `get('*')` fallback                 |
| Security          | рж╕ржВржмрзЗржжржирж╢рзАрж▓ ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржн ржирж╛ ржХрж░рж╛         |
| Performance       | CDN + compression                   |

---

## ЁЯПБ рззрзня╕ПтГг ржПржХ ржмрж╛ржХрзНржпрзЗ рж╕рж╛рж░ржорж░рзНржо

> Express.js-ржП **Static Files рж╕рж╛рж░рзНржн ржХрж░рж╛** ржорж╛ржирзЗ рж╣рж▓рзЛ тАФ `express.static()` middleware ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ HTML, CSS, JS, ржЗржорзЗржЬ ржЗрждрзНржпрж╛ржжрж┐ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржкрж╛ржарж╛ржирзЛ, ржпрзЗржЦрж╛ржирзЗ рж╕ржарж┐ржХ MIME ржЯрж╛ржЗржк, Cache Control, ржУ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЕржкрж╢ржи ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝ред

---

